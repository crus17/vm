"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[33058],{750532:(t,e,o)=>{var n=o(309103);function i(t,e="x"){let o=!1;return"x"!==e&&"both"!==e||(o=o||t.offsetWidth<t.scrollWidth),"y"!==e&&"both"!==e||(o=o||t.offsetHeight<t.scrollHeight),o}(0,o(677748).whenDocumentReady)((()=>{document.addEventListener("mouseenter",(t=>{const e=t.target;if(e instanceof HTMLElement&&e.matches(".apply-overflow-tooltip")){let t="x";if(e.matches(".apply-overflow-tooltip--direction_both")?t="both":e.matches(".apply-overflow-tooltip--direction_y")&&(t="y"),e.matches(".apply-overflow-tooltip--check-children")){let o=!1;const n=e.children;for(let e=0;e<n.length;e++){const r=n[e];if(r instanceof HTMLElement&&i(r,t)){o=!0;break}}if(!o)return}else if(!i(e,t))return;let o="";o=e.matches&&e.matches(".apply-overflow-tooltip--allow-text")?e.textContent||"":Array.from(e.childNodes).reduce(((t,e)=>(e.nodeType===Node.TEXT_NODE&&t.push(e.textContent||""),t)),[]).join("").trim(),(0,n.showOnElement)(e,{text:o});const r=()=>{(0,n.hide)(),["mouseleave","mousedown"].forEach((t=>e.removeEventListener(t,r)))};["mouseleave","mousedown"].forEach((t=>e.addEventListener(t,r)))}}),!0)}))},780237:(t,e,o)=>{o.d(e,{TickerItemAbstract:()=>u});o(750532);var n=o(911905),i=o(351299),r=o(903972),s=o(97639),a=o.n(s),c=o(143498),l=o(17966);const p=(0,n.getLogger)("WidgetTicker");class u{constructor(t,e,o){this.onInit=new(a()),this.onError=new(a()),this._isRunning=!1,this._el=e||document.createElement("a"),this._symbolData=t,this._options=o||{},(0,r.validateSymbolData)(t)?(this.render(),this.start()):p.logError("symbolData is not valid")}render(){const t=this._symbolData.title||this._symbolData.description||"";this._el.classList.add(this._getClass()),this._el.innerHTML=this._getView();const e=this._getElTitle();if(e){const o=t||this._symbolData.shortName||this._symbolData.proName||"",n=(0,c.detectAutoDirection)(o);n&&(e.dir=n),e.textContent=o}if(this._el instanceof HTMLAnchorElement){const t=this._symbolData.linkPage;t&&(this._el.href=t),this._options.isEmbedWidget&&(this._el.target="_blank",this._el.rel="external noopener")}}start(){this._isRunning||(this._startQuoteTicker(),this._isRunning=!0)}stop(){this._isRunning&&(this._stopQuoteTicker(),this._isRunning=!1)}getElement(){return this._el}_getElementClass(t){return this._getClass()+"__"+t}_getSymbolName(){return this._symbolData.proName||this._symbolData.shortName}_renderSymbolLogo(t,e){const o=this._el.querySelector(".js-header-icon"),n=0===t.length?this._getPlaceholderLetter():void 0;if(o){const i=(0,l.getCircleLogoAnyHtml)({logoUrls:t,size:e,className:this._getElementClass("icon"),placeholderLetter:n});o.innerHTML=i}}_getPlaceholderLetter(){const t=this._symbolData.proName,e=t&&t.split(":")[1];return(this._symbolData.title||this._symbolData.description||e||""||" ")[0]}_startQuoteTicker(){const t=this._getSymbolName();this._quoteTicker?this._quoteTicker.enable():this._quoteTicker=new i.QuoteTicker(t,this._el,{initedHook:(...t)=>this.onInit.fire(...t),
noSuchSymbolHook:()=>this.onError.fire("no_symbol"),sfPermissionDeniedHook:()=>this.onError.fire("permission_denied"),...this._getTickerOptions()})}_stopQuoteTicker(){this._quoteTicker&&this._quoteTicker.disable()}_getElTitle(){return this._el.querySelector(`.${this._getElementClass("title")}`)}}},903972:(t,e,o)=>{function n(t){return Boolean(t)&&("string"==typeof t.proName||"string"==typeof t.shortName)}o.d(e,{validateSymbolData:()=>n})},761850:(t,e,o)=>{var n=o(270617).declareClassAsPureInterface;function i(){}TradingView.WEB_SOCKET_WAS_CONNECTED=!1,i.REBIND_STUDY_STANDALONE_TO_CHILD=1,i.REBIND_STUDY_CHILD_TO_STANDALONE=2,i.prototype.defaultWatchlistSymbols=function(){},i.prototype.defaultResolutions=function(){},i.prototype.availableCurrencies=function(){},i.prototype.availableUnits=function(){},i.prototype.supportedSymbolsTypes=function(){},i.prototype.supportedExchangesList=function(){},i.prototype.symbolsGrouping=function(){},i.prototype.quoteCreateSession=function(t){},i.prototype.quoteDeleteSession=function(t){},i.prototype.quoteSetFields=function(t,e){},i.prototype.quoteAddSymbols=function(t,e){},i.prototype.quoteRemoveSymbols=function(t,e){},i.prototype.quoteFastSymbols=function(t,e){},i.prototype.depthCreateSession=function(t,e,o){},i.prototype.depthDeleteSession=function(t){},i.prototype.depthSetSymbol=function(t,e){},i.prototype.depthClearSymbol=function(t){},i.prototype.depthSetScale=function(t,e){},i.prototype.chartCreateSession=function(t,e){},i.prototype.chartDeleteSession=function(t){},i.prototype.createSession=function(t,e){},i.prototype.removeSession=function(t){},i.prototype.connected=function(){},i.prototype.connect=function(){},i.prototype.disconnect=function(){},i.prototype.switchTimezone=function(t,e){},i.prototype.resolveSymbol=function(t,e,o,n){},i.prototype.createSeries=function(t,e,o,n,i,r,s,a){},i.prototype.removeSeries=function(t,e,o){},i.prototype.modifySeries=function(t,e,o,n,i,r,s){},i.prototype.requestMoreData=function(t,e,o,n){},i.prototype.requestMetadata=function(t,e,o){},i.prototype.isCanCreateStudy=function(t,e){},i.prototype.createStudy=function(t,e,o,n,i,r,s){},i.prototype.rebindStudy=function(t,e,o,n,i,r,s,a){},i.prototype.removeStudy=function(t,e,o){},i.prototype.modifyStudy=function(t,e,o,n,i){},i.prototype.createPointset=function(t,e,o,n,i,r,s){},i.prototype.modifyPointset=function(t,e,o,n,i){},i.prototype.removePointset=function(t,e,o){},i.prototype.requestMoreTickmarks=function(t,e,o,n){},i.prototype.requestFirstBarTime=function(t,e,o,n){},i.prototype._invokeHandler=function(t,e){},i.prototype._sendRequest=function(t,e){},i.prototype._onMessage=function(t){},i.prototype._dispatchNotification=function(t){},i.prototype._invokeNotificationHandler=function(t,e,o){},i.prototype._notifySessions=function(t){},i.prototype.unpack=function(t){},i.prototype.searchSymbols=function(t,e,o,n,i,r,s,a,c,l){},i.prototype.serverTimeOffset=function(){},i.prototype.getMarks=function(t,e,o,n,i){},i.prototype.getTimescaleMarks=function(t,e,o,n,i){},n(i,"ChartApiInterface"),
t.exports.HandlerInfo=function(t,e){this.handler=t,this.customId=e},t.exports.ChartApiInterface=i},99177:(t,e,o)=>{function n(t){if(void 0===t)return"";if(t instanceof Error){let e=t.message;return t.stack&&(e+=" "+t.stack),e}return"string"==typeof t?t.toString():JSON.stringify(t)}o.d(e,{errorToString:()=>n})},977809:(t,e,o)=>{function n(t){return t.reduce((function(t,e,o){return~t.indexOf(e)||t.push(e),t}),[])}o.r(e),o.d(e,{uniq:()=>n})},175203:(t,e,o)=>{o.d(e,{telemetry:()=>u});var n=o(97639),i=o.n(n),r=o(86674),s=o(638456),a=o(314802);o(659863);const c=(0,o(911905).getLogger)("Common.Telemetry"),l={default:15e3,site:3e5},p=["before_websocket_connection_time_frame","websocket_connection_time_frame","first_series_full_time_frame","page_full_load_time_frame","page_load_time_frame"];const u=new class{constructor(){this.reportSent=new(i()),this.timeCounters={series:{marks:[]},study:{},pine:{}},this._timeoutIds={},this._commonAdditionalData={cluster:null,userId:"0"},this._reportStash={}}setSessionInfo(t){const e=this._parseCluster(t);null!==e&&(this._commonAdditionalData.cluster=e)}sendReport(t,e,o){var n;if(!this._isAbleToSendReport(e))return;const i=this._getSubserviceType(t),r=this._getHost(t,i);if(null!==r){if(o=void 0===o?{count:1}:o,this._addReportToStash(o,e,r),!this._timeoutIds[t]){const e=null!==(n=l[t])&&void 0!==n?n:l.default;this._timeoutIds[t]=setTimeout(this._sendTelemetryToService.bind(this,t,r),e)}}else c.logError(`Unable to get host for counter: ${e}, metric type: ${t}, serivce type: ${i}`)}sendChartReport(t,e,o=!0){this._sendServiceSpecifiedReport("charts",t,e,o)}sendLineToolsStorageReport(t,e,o=!0){this._sendServiceSpecifiedReport("line_tools_storage",t,e,o)}_sendServiceSpecifiedReport(t,e,o,n=!0){this._updateUserInfo(),o=void 0===o?{count:1}:o,n&&(o=this._appendCommonAdditionalInfo(o,["cluster","userId"])),this.sendReport(t,e,o)}_updateUserInfo(){const t="user"in window&&"id"in window.user?window.user.id:"0";this._commonAdditionalData.userId=String(t)}_isAbleToSendReport(t){const e=window.TELEMETRY_HOSTS,o=p.includes(t),n=Boolean(window.TradingView.onChartPage||(0,s.onWidget)());return e&&(!o||n)}_sendTelemetryToService(t,e){if(this._reportStash.hasOwnProperty(e)){const t=this._cropParams(this._reportStash[e]),o=this._renameAllParams(t),n={event:"report_stash",params:this._cleanAllParams(o)};c.logDebug(`Report to host: ${e}; stash: ${JSON.stringify(this._reportStash[e])}`),this.reportSent.fire(this._reportStash[e]),delete this._reportStash[e],(0,r.fetch)(`${e}/report`,{method:"POST",body:JSON.stringify(n)})}this._timeoutIds[t]=null}_getHost(t,e){const o=window.TELEMETRY_HOSTS,n=o[t]&&o[t][e];return Boolean(n)?n:null}_getSubserviceType(t){if(!["charts","site"].includes(t))return"all";let e="free";const o=window.user.is_pro;return"charts"===t&&(0,a.isOnMobileAppPage)("old")?e=o?"ios_pro":"ios_free":"charts"===t&&(0,a.isOnMobileAppPage)("new")?e=o?"android_pro":"android_free":(0,s.onWidget)()?e="widget":o&&(e="pro"),e}_parseCluster(t){let e;try{e=JSON.parse(t).session_id}catch(t){
return c.logError("Could not parse cluster id (session id)"),null}const o=/(.*@)(.*)/gi.exec(e);return null!==o&&o.length>=3?o[2]:null}_appendCommonAdditionalInfo(t,e){return e.forEach((e=>{e in this._commonAdditionalData&&(t.additional=t.additional||{},t.additional[e]=this._commonAdditionalData[e])})),t}_cropParams(t){var e;for(const o in t)t.hasOwnProperty(o)&&t[o].length>1e3&&(t.too_much_metrics_frame=null!==(e=t.too_much_metrics_frame)&&void 0!==e?e:[],t.too_much_metrics_frame.push({value:t[o].length,additional:{event:o}}),delete t[o]);return t}_renameAllParams(t){const e={};for(const o in t)t.hasOwnProperty(o)&&(e[o]=[],t[o].forEach((t=>{e[o].push(this._renameEntryParams(t))})));return e}_renameEntryParams(t){const e={count:"c",value:"v",text:"t",additional:"a"};return Object.keys(t).reduce(((o,n)=>(o[e[n]]=t[n],o)),{})}_cleanAllParams(t){const e={};for(const o in t)if(t.hasOwnProperty(o)){e[o]=[];const n={c:0};t[o].forEach((t=>{const i=this._cleanEntryParams(t),r=Object.keys(i).length;1===r&&void 0!==i.c?n.c+=i.c:r>0&&e[o].push(i)})),n.c>0&&e[o].push(n),0===e[o].length&&delete e[o]}return e}_cleanEntryParams(t){const e=Object.keys(t).reduce(((e,o)=>"c"!==o&&"t"!==o||t[o]?(e[o]=t[o],e):e),{});return"c"in e||"v"in e||"t"in e?e:{}}_addReportToStash(t,e,o){o in this._reportStash||(this._reportStash[o]={}),e in this._reportStash[o]||(this._reportStash[o][e]=[]),Object.keys(t).length>0&&this._reportStash[o][e].push(t)}}},909740:(t,e,o)=>{o.r(e),o.d(e,{setTheme:()=>r,watchedTheme:()=>i});var n=o(262325);const i=new(o.n(n)());function r(t){i.setValue(t)}i.subscribe((t=>{!function(t,e=window){const o="theme-"+t,n=e.document.documentElement.classList;for(const t of Array.from(n))t.startsWith("theme-")&&t!==o&&n.remove(t);n.add(o)}(t,window)}))}}]);